<nav class="power-sheet-tabs sheet-tabs tabs" data-group="powers">
    <a class="item" data-tab="qpowers">Quantum Powers</a>
    <a class="item" data-tab="megaedges">Mega Edges</a>
    <a class="item" data-tab="transformations">Transcendence</a>
    <a class="item" data-tab="options">Options</a>
</nav>

{{!-- Main Tab Section--}}
<div class="power-sheet-body">

  {{!-- Quantum Power Sub Section.  
    Prebuilt for 3 power suites. 
    Powers go into the corresponding numbered power suite or if anything else into the "general" section. 
    --}}
  <div class="tab qpowers" data-group="powers" data-tab="qpowers">
    <div class="stat-detail-row">              
      <label class="resource-label" for="system.traits.quantum.value">{{localize "TC.Labels.Quantum"}}</label>
      <input class="text-2digit" type="text" name="system.traits.quantum.value" value="{{system.traits.quantum.value}}" data-dtype="Number"/>
      <label class="resource-label" for="system.traits.quantumpoints.value">{{localize "TC.Labels.Quantumpoints"}}</label>
      <div>
        <input class="text-2digit" type="text" name="system.traits.quantumpoints.value" value="{{system.traits.quantumpoints.value}}" data-dtype="Number"/>
        <span class="math-label"> / </span>
        <input class="text-2digit" size="4" type="text" name="system.traits.quantumpoints.max" value="{{system.traits.quantumpoints.max}}" data-dtype="Number" readonly/>
      </div>                
    </div>

    {{#each quantumpower as |quantumpower suite|}}
    
      <ol class='items-list power-suite{{suite}}'>
        <li class='item flexrow items-header'>
          <div class='item-name'>
            
            {{!--I couldn't figure out how to make handlebars work with an array --}} 
            {{#if (eq suite '1')}}
              {{@root.system.powersuite.one}}
            {{/if}}
            {{#if (eq suite '2')}}
              {{@root.system.powersuite.two}}
            {{/if}}
            {{#if (eq suite '3')}}
              {{@root.system.powersuite.three}}
            {{/if}}
            {{#if (eq suite '0')}}
              {{@root.system.powersuite.none}}
            {{/if}}
          </div>
          <div class='item-rating'>{{localize "TC.Labels.Rating"}}</div>
          <div class='item-tags'>{{localize "TC.Power.Tags"}}</div>
          <div class='item-controls'>
            <a
              class='item-control item-create'
              title='{{localize "DOCUMENT.Create" type='Quantumpower'}}'
              data-type='quantumpower'
              data-suite='{{suite}}'
            >
              <i class='fas fa-plus'></i>
              {{localize 'DOCUMENT.New' type=''}}
            </a>
          </div>
        </li>
        {{#each quantumpower as |item id|}}
          <li class='item flexrow' data-item-id='{{item._id}}'>
            <div class='item-name flexrow'>
              <div class='item-image'>
                <a class='rollable' data-roll-type='item'><img
                    src='{{item.img}}'
                    title='{{item.name}}'
                    width='24'
                    height='24'
                  /></a>
              </div>
              <a
                class='item-control item-edit'
                title='{{localize "DOCUMENT.Edit" type='quantumpower'}}'
              >
                <h4>{{item.name}}</h4>
              </a>
            </div>
            <div class='item-rating'>{{item.system.rating}}</div>
            <div class='item-tags'>{{item.system.tags}}</div>
            <div class='item-controls'>
              <a
                class='item-control item-edit'
                title='{{localize "DOCUMENT.Edit" type='quantumpower'}}'
              >
                <i class='fas fa-edit'></i>
              </a>
              <a
                class='item-control item-delete'
                title='{{localize "DOCUMENT.Delete" type='quantumpower'}}'
              >
                <i class='fas fa-trash'></i>
              </a>
            </div>
          </li>
        {{/each}}
      </ol>    
    {{/each}}
    
  </div>

  {{!-- Mega Edge Section --}}
  <div class="tab megaedges" data-group="powers" data-tab="megaedges">
    {{#each megaedge as |megaedge type|}}
    <ol class='items-list{{#if (eq @index 1)}} added-segment{{/if}}'>
      <li class='item flexrow items-header'>
        <div class='item-name'>{{#if (eq @index 0)}}{{localize "TC.Labels.Permanentmegaedge"}}{{else}}{{localize "TC.Labels.Temporarymegaedge"}}{{/if}}</div>
        <div class='item-rating'>{{localize 'TC.Labels.Rating'}}</div>
        <div class='item-tags-short'>{{localize 'TC.Labels.Tags'}}</div>
        <div class='item-controls'>
          <a
            class='item-control item-create'
            title='{{localize "DOCUMENT.Create" type='Mega Edge'}}'
            data-type='megaedge'
          >
            <i class='fas fa-plus'></i>
            {{localize 'DOCUMENT.New' type=''}}
          </a>
        </div>
      </li>
      {{#each megaedge as |item id|}}
        <li class='item flexrow' data-item-id='{{item._id}}'>
          <div class='item-name'>
            <div class='item-image'>
              <a class='rollable' data-roll-type='Item'>
                <img
                  src='{{item.img}}'
                  title='{{item.name}}'
                  width='24'
                  height='24'
                />
              </a>
            </div>
            <a
              class='item-control item-edit'
              title='{{localize "DOCUMENT.Update" type='Item'}}'
            >
            <h4>{{item.name}}</h4>
            </a>
          </div>
          <div class='item-rating'>{{item.system.rating}}</div>
          <div class='item-tags-short'>{{item.system.tags}}</div>
          <div class='item-controls'>
            <a
              class='item-control item-edit'
              title='{{localize "DOCUMENT.Update" type='Item'}}'
            >
              <i class='fas fa-edit'></i>
            </a>
            <a
              class='item-control item-delete'
              title='{{localize "DOCUMENT.Delete" type='Item'}}'
            >
              <i class='fas fa-trash'></i>
            </a>
          </div>
        </li>
      {{/each}}
    </ol>
    {{/each}}
  </div>

  {{!-- Transformations Section --}}
  <div class="tab transformations" data-group="powers" data-tab="transformations">
    <div class="stat-detail-row">
      <label class="resource-label" for"system.traits.flux.value">{{localize "TC.Labels.Flux"}}</label>
      <input class="text-2digit" type="number" name="system.traits.flux.value" value="{{system.traits.flux.value}}" data-dtype="Number"/>  
      <label class="resource-label" for"system.traits.transcendence.value">{{localize "TC.Labels.Transcendence"}}</label>
      <input class="text-2digit" type="number" name="system.traits.transcendence.value" value="{{system.traits.transcendence.value}}" data-dtype="Number"/>
    </div>
    <ol class='items-list'>
      <li class='item flexrow items-header'>
        <div class='item-name'>{{localize "TYPES.Item.transformation"}}</div>
        <div class='item-level'>{{localize 'TC.Labels.Level'}}</div>
        <div class='item-controls'>
          <a
            class='item-control item-create'
            title='{{localize "DOCUMENT.Create" type='Transformation'}}'
            data-type='transformation'
          >
            <i class='fas fa-plus'></i>
            {{localize 'DOCUMENT.New' type=''}}
          </a>
        </div>
      </li>
      {{#each transformation as |item id|}}
        <li class='item flexrow' data-item-id='{{item._id}}'>
          <div class='item-name'>
            <div class='item-image'>
              <a class='rollable' data-roll-type='Transformation'>
                <img
                  src='{{item.img}}'
                  title='{{item.name}}'
                  width='24'
                  height='24'
                />
              </a>
            </div>
            <a
              class='item-control item-edit'
              title='{{localize "DOCUMENT.Update" type='Item'}}'
            >
            <h4>{{item.name}}</h4>
            </a>
          </div>
          <div class='item-level'>{{item.system.level}}</div>
          <div class='item-controls'>
            <a
              class='item-control item-edit'
              title='{{localize "DOCUMENT.Update" type='Item'}}'
            >
              <i class='fas fa-edit'></i>
            </a>
            <a
              class='item-control item-delete'
              title='{{localize "DOCUMENT.Delete" type='Item'}}'
            >
              <i class='fas fa-trash'></i>
            </a>
          </div>
        </li>
      {{/each}}
    </ol>
  </div>

  {{!-- Power Options Section.--}}
  <div class="tab paths" data-group="powers" data-tab="options">
    <h3 class="style-header">{{localize "TC.Labels.Powersuites"}}</h3>
    <div class="stat-detail-row">
      <div class="suite-column resource-label">{{localize "TC.Labels.Nopowersuite"}}</div>
      <label class="suite-name">{{localize "TC.Labels.Name"}}: </label>
      <input class="suite-text" type="text" name="system.powersuite.none" value="{{system.powersuite.none}}" data-dtype="String"/>
    </div>
    <div class="stat-detail-row">
      <div class="suite-column resource-label">{{localize "TC.Labels.Suite1"}}</div>
      <label class="suite-name">{{localize "TC.Labels.Name"}}: </label>
      <input class="suite-text" type="text" name="system.powersuite.one" value="{{system.powersuite.one}}" data-dtype="String"/>
    </div>
    <div class="stat-detail-row">
      <div class="suite-column resource-label">{{localize "TC.Labels.Suite2"}}</div>
      <label class="suite-name">{{localize "TC.Labels.Name"}}: </label>
      <input class="suite-text" type="text" name="system.powersuite.two" value="{{system.powersuite.two}}" data-dtype="String"/>
    </div>
    <div class="stat-detail-row">
      <div class="suite-column resource-label">{{localize "TC.Labels.Suite3"}}</div>
      <label class="suite-name">{{localize "TC.Labels.Name"}}: </label>
      <input class="suite-text" type="text" name="system.powersuite.three" value="{{system.powersuite.three}}" data-dtype="String"/>
    </div>
    <h3 class="style-header">{{localize "TC.Labels.Maxedtrack"}}</h3>
    <div class="maxed-out-details">
      <div class="maxed-out-column1">
        <div class="maxed-out-row">
          <label class="maxed-out resource-label" for="system.quantum.maxedout">{{localize "TC.Labels.Times"}} {{localize "TC.Labels.Quantum"}} {{localize "TC.Labels.Maxedout"}}: </label>
          <input class="align-boxes text-2digit" type="number" name="system.quantum.maxedout" value="{{system.quantum.maxedout}}" data-dtype="Number"/>
        </div>
        {{#each system.attributes as |attribute key|}}
          <div class="maxed-out-row">
            <label class="maxed-out resource-label" for="system.attributes.{{key}}.mega.maxedout">{{localize (lookup @root.config.megaattributes key)}} {{localize "TC.Labels.Maxedout"}}?</label>
            {{#if attribute.mega.maxedout}}
              <input class="align-boxes small-check" type="checkbox" name="system.attributes.{{key}}.mega.maxedout" value="true" data-dtype="Boolean" checked/>
            {{else}}
              <input class="align-boxes small-check" type="checkbox" name="system.attributes.{{key}}.mega.maxedout" value="false" data-dtype="Boolean"/>
            {{/if}}
          </div>
        {{/each}}
      </div>
      <div class="maxed-out-column2">
        <div class="maxed-out-row resource-label"><label for="system.newmaxedpowers">{{localize "TC.Labels.Unacquiredpower"}}:</label></div>
        <div class="maxed-out-row maxed-out-general"><textarea class="" name="system.newmaxedpowers" rows="13" data-dtype="String">{{system.newmaxedpowers}}</textarea></div>
      </div>
    </div>
  </div>
</div>